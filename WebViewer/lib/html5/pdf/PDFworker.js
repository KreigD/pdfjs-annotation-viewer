(function(b){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(d,a){void 0===d&&(d=0);void 0===a&&(a=this.byteLength);d=Math.floor(d);a=Math.floor(a);0>d&&(d+=this.byteLength);0>a&&(a+=this.byteLength);d=Math.min(Math.max(0,d),this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);if(0>=a-d)return new ArrayBuffer(0);var c=new ArrayBuffer(a-d),g=new Uint8Array(c),e=new Uint8Array(this,d,a-d);g.set(e);return c})})(this);var createPromiseCapability=function(){var b={};b.promise=new Promise(function(d,a){b.resolve=d;b.reject=a});return b};("undefined"===typeof window?this:window).createPromiseCapability=createPromiseCapability;
(function(b){function d(a){this._status=0;this._handlers=[];try{a.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(c){this._reject(c)}}if(b.Promise)"function"!==typeof b.Promise.all&&(b.Promise.all=function(a){var c=0,d=[],m,k,r=new b.Promise(function(a,c){m=a;k=c});a.forEach(function(a,g){c++;a.then(function(a){d[g]=a;c--;0===c&&m(d)},k)});0===c&&m(d);return r}),"function"!==typeof b.Promise.resolve&&(b.Promise.resolve=function(a){return new b.Promise(function(c){c(a)})}),"function"!==
typeof b.Promise.reject&&(b.Promise.reject=function(a){return new b.Promise(function(c,d){d(a)})}),"function"!==typeof b.Promise.prototype["catch"]&&(b.Promise.prototype["catch"]=function(a){return b.Promise.prototype.then(void 0,a)});else{var a="function"===typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},c={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(c){0!==c._status&&(this.handlers=this.handlers.concat(c._handlers),c._handlers=
[],this.running||(this.running=!0,a(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var c=Date.now()+1;0<this.handlers.length;){var e=this.handlers.shift(),d=e.thisPromise._status,b=e.thisPromise._value;try{1===d?"function"===typeof e.onResolve&&(b=e.onResolve(b)):"function"===typeof e.onReject&&(b=e.onReject(b),d=1,e.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(e.thisPromise))}catch(k){d=2,b=k}e.nextPromise._updateStatus(d,b);if(Date.now()>=c)break}0<this.handlers.length?
a(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var c=0;c<this.unhandledRejections.length;c++)this.unhandledRejections[c].promise===a&&(this.unhandledRejections.splice(c),c--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=
!1;for(var a=Date.now(),c=0;c<this.unhandledRejections.length;c++)if(500<a-this.unhandledRejections[c].time){var d=this.unhandledRejections[c].promise._value,b="Unhandled rejection: "+d;d.stack&&(b+="\n"+d.stack);warn(b);this.unhandledRejections.splice(c);c--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};d.all=function(a){function c(f){2!==k._status&&(n=[],m(f))}var b,m,k=new d(function(f,a){b=f;m=a}),r=a.length,n=[];if(0===r)return b(n),k;for(var p=0,t=a.length;p<
t;++p){var u=a[p],f=function(f){return function(a){2!==k._status&&(n[f]=a,r--,0===r&&b(n))}}(p);d.isPromise(u)?u.then(f,c):f(u)}return k};d.isPromise=function(a){return a&&"function"===typeof a.then};d.resolve=function(a){return new d(function(c){c(a)})};d.reject=function(a){return new d(function(c,d){d(a)})};d.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,b){1!==this._status&&2!==this._status&&(1===a&&d.isPromise(b)?b.then(this._updateStatus.bind(this,
1),this._updateStatus.bind(this,2)):(this._status=a,this._value=b,2===a&&0===this._handlers.length&&(this._unhandledRejection=!0,c.addUnhandledRejection(this)),c.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(2,a)},then:function(a,b){var h=new d(function(a,c){this.resolve=a;this.reject=c});this._handlers.push({thisPromise:this,onResolve:a,onReject:b,nextPromise:h});c.scheduleHandlers(this);return h},"catch":function(a){return this.then(void 0,
a)}};b.Promise=d}})("undefined"===typeof window?this:window);(function(b){var d=function(a,c){var b=function(a){a=this["catch"](a);return{cancel:c,promise:a,then:d.bind(a),"catch":b.bind(a)}},d=function(a,m){var k=this.then(a,m);return{cancel:c,promise:k,then:d.bind(k),"catch":b.bind(k)}};return{cancel:c,promise:a,then:d.bind(a),"catch":b.bind(a)}};b.CancellablePromise=function(a,c){var b=!1,e,h=new Promise(function(d,h){e=function(){b||(c(),h("cancelled"))};(new Promise(a)).then(function(a){b=!0;d(a)},function(a){b=!0;h(a)})});return d(h,e)};b.CancellablePromise.all=
function(a){var c=Promise.all(a);return d(c,function(){a.forEach(function(a,c){a.cancel&&a.cancel()})})}})("undefined"===typeof self?this:self);(function(b){b.MessageHandler=function(d,a){this.name=d;this.comObj=a;this.callbackIndex=1;this.postMessageTransfers=!0;this.callbacksCapabilities={};var c=this.actionHandler={};this.actionHandlerAsync={};this.nextAsync=null;c.console_log=[function(a){console.log(a)}];c.console_error=[function(a){b.utils.error(a)}];c.workerLoaded=[function(a){}];a.addEventListener("message",this.handleMessage.bind(this))};b.MessageHandler.prototype={on:function(d,a,c){var g=this.actionHandler;g[d]&&b.utils.error('There is already an actionName called "'+
d+'"');g[d]=[a,c]},replace:function(b,a,c){this.actionHandler[b]=[a,c]},onAsync:function(d,a,c){var g=this.actionHandlerAsync;g[d]&&b.utils.error('There is already an actionName called "'+d+'"');g[d]=[a,c]},replaceAsync:function(b,a,c){var g=this.actionHandlerAsync,e=this.actionHandler;e[b]&&delete e[b];g[b]=[a,c]},onNextAsync:function(b){this.nextAsync=b},send:function(b,a){this.postMessage({action:b,data:a})},getNextId:function(){return this.callbackIndex++},sendWithPromise:function(b,a,c){var g=
this.getNextId();b={action:b,data:a,callbackId:g,priority:c};a=createPromiseCapability();this.callbacksCapabilities[g]=a;try{this.postMessage(b)}catch(e){a.reject(e)}return a.promise},sendWithPromiseReturnId:function(b,a,c){var g=this.getNextId();b={action:b,data:a,callbackId:g,priority:c};a=createPromiseCapability();this.callbacksCapabilities[g]=a;try{this.postMessage(b)}catch(e){a.reject(e)}return{promise:a.promise,callbackId:g}},sendWithPromiseWithId:function(d,a,c,g){a>this.callbackIndex&&b.utils.error("Can't reuse callbackId "+
a+" lesser than callbackIndex "+this.callbackIndex);a in this.callbacksCapabilities&&b.utils.error("Can't reuse callbackId "+a+". There is a capability waiting to be resolved. ");d={action:d,data:c,callbackId:a};c=createPromiseCapability();this.callbacksCapabilities[a]=c;try{this.postMessage(d)}catch(e){c.reject(e)}return c.promise},sendError:function(b,a){if(b.message||b.errorData){b.message&&b.message.message&&(b.message=b.message.message);var c=b.errorData;b={type:b.type?b.type:"JavascriptError",
message:b.message};if(c)for(var g in c)c.hasOwnProperty(g)&&(b[g]=c[g])}this.postMessage({isReply:!0,callbackId:a,error:b})},getPromise:function(d){if(d in this.callbacksCapabilities)return this.callbacksCapabilities[d];b.utils.error("Cannot get promise for callback "+d)},cancelPromise:function(d){if(d in this.callbacksCapabilities){var a=this.callbacksCapabilities[d];delete this.callbacksCapabilities[d];a.reject({type:"Cancelled",message:"Request has been cancelled."});this.postMessage({action:"actionCancel",
data:{callbackId:d}})}else b.utils.warn("Cannot cancel callback "+d)},postMessage:function(b){if(this.postMessageTransfers){var a=this.getTransfersArray(b);this.comObj.postMessage(b,a)}else this.comObj.postMessage(b)},getObjectTransfers:function(b,a){if("object"===typeof b)if(b instanceof Uint8Array)a.push(b.buffer);else if(b instanceof ArrayBuffer)a.push(b);else for(prop in b)b.hasOwnProperty(prop)&&this.getObjectTransfers(b[prop],a)},getTransfersArray:function(b){var a=[];this.getObjectTransfers(b,
a);return 0==a.length?void 0:a},handleMessage:function(d){var a=this,c=d.data,g=this.actionHandler,e=this.actionHandlerAsync;d=this.callbacksCapabilities;if(c.isReply)g=c.callbackId,g in d?(e=d[g],delete d[g],"error"in c?e.reject(c.error):e.resolve(c.data)):b.utils.warn("Cannot resolve callback "+g);else if(c.action in g){var h=g[c.action];c.callbackId?Promise.resolve().then(function(){return h[0].call(h[1],c.data)}).then(function(b){a.postMessage({isReply:!0,callbackId:c.callbackId,data:b})},function(b){a.sendError(b,
c.callbackId)}):h[0].call(h[1],c.data)}else c.action in e?(h=e[c.action],d=createPromiseCapability(),c.callbackId?d.promise.then(function(b){a.postMessage({isReply:!0,callbackId:c.callbackId,data:b});a.nextAsync()},function(b){a.sendError(b,c.callbackId);a.nextAsync()}):d.promise.then(function(b){a.nextAsync()},function(b){a.nextAsync()}),h[0].call(h[1],c,d)):b.utils.error("Unknown action from worker: "+c.action)}}})("undefined"===typeof window?this:window);(function(b){var d=b._trnDebugMode;"undefined"===typeof b.utils&&(b.utils={warn:function(a){d&&console.warn(a)},log:function(a){d&&console.log(a)},error:function(a){d&&console.error(a);throw Error(a);}});b.info=function(a){b.utils.log(a)};b.warn=function(a){b.utils.warn(a)};b.error=function(a){b.utils.error(a)}})("undefined"===typeof window?this:window);(function(b){b.Module={TOTAL_MEMORY:50331648,noExitRuntime:!0,devicePixelRatio:1,cur_doc:null,cache_ptr_size:0,has_buf_ownership:!0,loaded:!1,init_cb:null,cache_ptr:null,cleanupState:null,stopped:!1,docs:{},postEvent:function(b,a,c){Module.workerMessageHandler.send("event",{docId:b,type:a,data:c})},postPagesUpdatedEvent:function(b,a,c){b={pageDimensions:Module.GetPageDimensions(b)};if(c)for(var g=0;g<c.length;++g)c[g]in b.pageDimensions?b.pageDimensions[c[g]].contentChanged=!0:console.warn("Invalid Page Number "+
c[g]);Module.postEvent(a,"pagesUpdated",b);return b},GetIndividualPageDimensions:function(b,a,c){b=Module.PageGetPageInfo(c);b.id=Module.PageGetId(c);return b},GetPageDimensionsRange:function(b,a,c){for(var g={},e=Module.PDFDocGetPageIterator(b,a);a<c&&Module.IteratorHasNext(e);++a){var h=Module.IteratorCurrent(e);g[a]=this.GetIndividualPageDimensions(b,a,h);Module.IteratorNext(e)}return g},GetPageDimensions:function(b){try{var a=Module.Runtime.stackSave(),c=Module.GetPageCount(b);if(0===c)throw"This document has no pages.";
return Module.GetPageDimensionsRange(b,1,c+1)}finally{Module.Runtime.stackRestore(a)}},loadDoc:function(b,a){"undefined"===typeof Module&&this._main();var c=null;try{var g=Module.Runtime.stackSave();a=Module.CreateDoc(b,a);var e=Module.GetDoc(a);if(Module.PDFDocInitSecurityHandler(e))return{docId:a,pageDimensions:Module.GetPageDimensions(e)};c={type:"NeedsPassword",errorData:{docId:a},message:"This document requires a password"}}catch(h){c={type:"InvalidPDF",message:h}}finally{Module.Runtime.stackRestore(g)}throw c;
},loadCanvas:function(b,a,c,g,e,h,m,k,r){var n=Module.GetDoc(b),p=a+1,t=function(){Module.RasterizePage(n,p,c,g,h,e,m,k,r)},u=Module.docs[b].chunkStorage;if(u){b=Module.GetDownloadData(n).downloader;var f=u.getRequiredChunkOffsetArrays(b,p);u.keepChunks(f.have);b=function(){var l=u.getChunks(f.missing);Module.loadPromise=l.then(function(){var f=Module.loadPromise.cancelled;Module.loadPromise=null;f||t()})["catch"](function(f){"cancelled"!==f?r.reject(f):Module.loadPromise=null})};Module.loadPromise?
Module.loadPromise.then(b,b):b()}else t()},loadResources:function(d,a){Module.Initialize(a);b.utils.log("PDFNet initialized!");Module.f0(!1);var c=new Uint8Array(d);Module.PDFNetSetResourceData(c)},_main:function(){enlargeMemory=function(){var b=Math.pow(2,31);if(DYNAMICTOP>=b)return!1;for(;TOTAL_MEMORY<=DYNAMICTOP;)if(TOTAL_MEMORY<b/2)TOTAL_MEMORY=alignMemoryPage(TOTAL_MEMORY+50331648),console.log("Enlarging Emscripten Heap To: "+TOTAL_MEMORY+" bytes");else{var a=TOTAL_MEMORY;TOTAL_MEMORY=alignMemoryPage((3*
TOTAL_MEMORY+b)/4);console.log("Enlarging Emscripten Heap To: "+TOTAL_MEMORY+" bytes");if(TOTAL_MEMORY<=a)return!1}TOTAL_MEMORY=Math.max(TOTAL_MEMORY,16777216);if(TOTAL_MEMORY>=b)return!1;try{if(ArrayBuffer.transfer)buffer=ArrayBuffer.transfer(buffer,TOTAL_MEMORY);else{var c=HEAP8;buffer=new ArrayBuffer(TOTAL_MEMORY)}}catch(g){return!1}if(!_emscripten_replace_memory(buffer))return!1;Module.buffer=buffer;Module.HEAP8=HEAP8=new Int8Array(buffer);Module.HEAP16=HEAP16=new Int16Array(buffer);Module.HEAP32=
HEAP32=new Int32Array(buffer);Module.HEAPU8=HEAPU8=new Uint8Array(buffer);Module.HEAPU16=HEAPU16=new Uint16Array(buffer);Module.HEAPU32=HEAPU32=new Uint32Array(buffer);Module.HEAPF32=HEAPF32=new Float32Array(buffer);Module.HEAPF64=HEAPF64=new Float64Array(buffer);ArrayBuffer.transfer||HEAP8.set(c);return!0};"undefined"===typeof Module&&(("undefined"!==typeof window?window:self).Module={});(function(d){d.PDFDocExportXFDF=function(a,b){var g=Module.GetDoc(a),e=Module.Runtime.stackSave(),h;try{var d=
b?Module.PDFDocFDFExtract(g,b):Module.PDFDocFDFExtract(g);h=Module.FDFDocSaveAsXFDF(d);Module.Runtime.stackRestore(e)}catch(k){throw Module.Runtime.stackRestore(e),k;}return h};d.PageArrayToPageSet=function(a){var b=Module.Runtime.stackSave(),g;try{g=Module.PageSetCreate();for(var e=0;e<a.length;++e)Module.PageSetAddPage(g,a[e]);Module.Runtime.stackRestore(b)}catch(h){throw Module.Runtime.stackRestore(b),h;}return g};d.cancelCurrent=function(){var a=Module.loadPromise;return a?(a.cancel(),a.cancelled=
!0):(a=Module.cleanupState)?(clearTimeout(a.timeout),a.cleanupArr.forEach(function(a){a()}),Module.cleanupState=null,!0):!1};d.SetWorkerRestartCallback=function(a){Module.workerRestartCallback=a};d.XFDFMerge=function(a,b){if(b){var g=[];try{for(var e=Module.PDFDocGetPageIterator(a,1);Module.IteratorHasNext(e);){var h=Module.IteratorCurrent(e);try{for(var m=Module.PageGetNumAnnots(h);0<m;){var k=Module.PageGetAnnot(h,--m);switch(Module.AnnotGetType(k)){case 1:case 16:case 17:case 18:case 19:break;
default:d.PageAnnotRemove(h,m)}}}catch(t){Module.ObjErase(h,"Annots")}Module.IteratorNext(e)}var r=Module.GetUStringFromJSString(b,!0);g.push(function(){Module.UStringDestroy(r)});var n=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f1(r,n));var p=Module.getValue(n,"i8*");g.push(function(){Module.FDFDocDestroy(p)});REX(Module.f2(a,p))}finally{g.forEach(function(a){a()})}}};d.MergeXFDF=function(a,b,g){var e=[];try{var h=Module.Runtime.stackSave();e[e.length]=function(){Module.Runtime.stackRestore(h)};
var d=Module.GetDoc(a);Module.XFDFMerge(d,b);setTimeout(function(){e.forEach(function(a){a()});g.resolve({})},0)}catch(k){Module.stopped||(e.forEach(function(a){a()}),g.reject(k))}};d.SaveHelper=function(a,b,g){g="undefined"===typeof g?2:g;Module.allocate(4,"i8",Module.ALLOC_STACK);Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(b);a=Module.f3(a,Module.GetUStringFromJSString(b),g,0);Module.docs[b].sink=null;REX(a);return Module.docs[b].buffer.buffer};d.SaveDoc=function(a,b,g,e,h,d){var k=
Module.GetDoc(a),r=[];try{var k=Module.GetDoc(a),n=Module.Runtime.stackSave();r[r.length]=function(){Module.Runtime.stackRestore(n)};Module.XFDFMerge(k,b);for(var p=Module.PDFDocGetPageIterator(k,1);Module.IteratorHasNext(p);){var t=Module.IteratorCurrent(p);try{for(var u=Module.PageGetNumAnnots(t);0<u;){var f=Module.PageGetAnnot(t,--u);Module.AnnotHasAppearance(f)||Module.AnnotRefreshAppearance(f)}}catch(q){Module.ObjErase(t,"Annots")}Module.IteratorNext(p)}b=0;if(e){var l=Module.PDFDocGetRoot(k);
(b=Module.ObjFindObj(l,"OpenAction"))&&Module.ObjPut(l,"__OpenActionBackup__",b);var w=Module.ObjPutDict(l,"OpenAction");Module.ObjPutName(w,"Type","Action");Module.ObjPutName(w,"S","JavaScript");Module.ObjPutString(w,"JS","this.print()")}var v=Module.SaveHelper(k,a,h);e&&(b?Module.ObjPut(l,"OpenAction",Module.ObjFindObj(l,"__OpenActionBackup__")):Module.ObjErase(l,"OpenAction"));setTimeout(function(){r.forEach(function(f){f()});if(g)d.resolve({fileData:v});else{var f=v.slice(0);d.resolve({fileData:f})}},
0)}catch(q){Module.stopped||(r.forEach(function(f){f()}),d.reject(q))}};d.SaveDocFromFixedElements=function(a,b,g,e){a=Module.PDFDocCreateFromLayoutEls(a);a=Module.CreateDoc({type:"ptr",value:a});Module.SaveDoc(a,b,!0,!1,g,e)};d.GetCurrentCanvasData=function(a){var b=Module.currentRenderData;if(!b)return null;a&&REX(Module.f4(b.rast));a=new Uint8Array(new ArrayBuffer(b.buf_size));for(var g=0,e=0;e<b.out_height;++e)for(var h=b.bufPtr+b.stride*e,d=0;d<b.out_width;++d)a[g++]=Module.HEAPU8[h+2],a[g++]=
Module.HEAPU8[h+1],a[g++]=Module.HEAPU8[h],a[g++]=Module.HEAPU8[h+3],h+=4;return{pageBuf:a.buffer,pageWidth:b.out_width,pageHeight:b.out_height}};d.RasterizePage=function(a,c,g,e,h,d,k,r,n){Module.currentRenderData={};var p=Module.currentRenderData;p.out_width=parseInt(g);p.out_height=parseInt(e);var t=[];t.push(function(){Module.currentRenderData=null});try{var u=function(){try{for(var f=0,l=(new Date).getTime(),a=!1;200>f;){REX(Module.f12(E,H));if(!Module.getValue(H,"i8*")){a=!0;break}f=(new Date).getTime()-
l}if(a){var w=Module.GetCurrentCanvasData(!1);b.utils.log("Total Page Time "+((new Date).getTime()-G));Module.stopped||(t.forEach(function(f){f()}),n.resolve(w))}else Module.cleanupState.timeout=setTimeout(u,0)}catch(q){Module.stopped||(t.forEach(function(f){f()}),n.reject(q))}},f=Module.Runtime.stackSave();t[t.length]=function(){Module.Runtime.stackRestore(f)};var l=Module.GetPage(a,c),w=Module.PageGetPageWidth(l),v=Module.PageGetPageHeight(l);p.stride=4*p.out_width;p.buf_size=p.out_width*p.out_height*
4;p.rast=Module.PDFRasterizerCreate();t.push(function(){Module.f5(p.rast)});if(k){var q=Module.EMSCreateUpdatedLayersContext(a,k);0!=q&&(Module.f6(p.rast,q),t.push(function(){Module.f7(q)}))}REX(Module.f8(p.rast,r));var y=Module.PageGetRotation(l);a=1==d||3==d;var y=(1==y||3==y)!=a,x,A=Module.allocate(48,"i8",Module.ALLOC_STACK),z;if(h){h.x1=h[0];h.y1=h[1];h.x2=h[2];h.y2=h[3];var C=Module.PageGetDefaultMatrix(l,0),B=Module.Matrix2DInverse(C);h=Module.Matrix2DMultBBox(B,h);var D;h.x2<h.x1&&(D=h.x1,
h.x1=h.x2,h.x2=D);h.y2<h.y1&&(D=h.y1,h.y1=h.y2,h.y2=D);x=p.out_width/(y?h.y2-h.y1:h.x2-h.x1);z=Module.GetDefaultMatrixBox(l,h,d)}else z=Module.PageGetDefaultMatrix(l,d),x=p.out_width/(a?v:w);Module.Matrix2DSet(A,x,0,0,x,0,0);Module.Matrix2DConcat(A,z);p.bufPtr=Module._malloc(p.buf_size);Module._memset(p.bufPtr,255,p.buf_size);t.push(function(){Module._free(p.bufPtr)});var F=Module.allocate(4,"i8",Module.ALLOC_STACK),H=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f9(p.rast,0));REX(Module.f10(p.rast,
l,p.bufPtr,p.out_width,p.out_height,p.stride,4,!0,A,0,0,0,F));var E=Module.getValue(F,"i8*");t.push(function(){REX(Module.f11(E))});var G=(new Date).getTime(),J=setTimeout(u,0);Module.cleanupState={cleanupArr:t,timeout:J};t.push(function(){Module.cleanupState=null})}catch(I){Module.stopped||(t.forEach(function(f){f()}),n.reject(I))}};d.GetDestinationVPosHPos=function(a){var b=0,g=0,e=!1,h=!1,d=Module.DestinationGetPage(a),k=Module.DestinationGetExplicitDestObj(a),d=Module.PageGetDefaultMatrix(d),
d=Module.Matrix2DInverse(d),r=Module.Matrix2DMult(d,{x:g,y:b}),g=r.x,b=r.y,n;try{switch(Module.DestinationGetFitType(a)){case 2:case 6:n=Module.ObjGetAt(k,2);Module.ObjIsNumber(n)&&(b=Module.ObjGetNumber(n),e=!0);break;case 0:n=Module.ObjGetAt(k,2);Module.ObjIsNumber(n)&&(g=Module.ObjGetNumber(n),h=!0);n=Module.ObjGetAt(k,3);Module.ObjIsNumber(n)&&(b=Module.ObjGetNumber(n),e=!0);break;case 4:n=Module.ObjGetAt(k,2);Module.ObjIsNumber(n)&&(g=Module.ObjGetNumber(n),h=!0);n=Module.ObjGetAt(k,5);Module.ObjIsNumber(n)&&
(b=Module.ObjGetNumber(n),e=!0);break;case 3:case 7:n=Module.ObjGetAt(k,2),Module.ObjIsNumber(n)&&(g=Module.ObjGetNumber(n),h=!0)}r=Module.Matrix2DMult(d,{x:g,y:b});g=r.x;b=r.y;e||(b=0);h||(g=0)}catch(p){g=b=0}return{hpos:g,vpos:b}};d.FillBookmarkTree=function(a,b){for(var g=0;Module.BookmarkIsValid(a);a=Module.BookmarkGetNext(a),++g)try{var e=[];if(Module.BookmarkHasChildren(a)){var d=Module.BookmarkGetFirstChild(a);Module.FillBookmarkTree(d,e)}var m=Module.BookmarkGetTitle(a),e={children:e,name:m},
k=Module.BookmarkGetAction(a);if(Module.ActionIsValid(k)){var r=Module.ActionGetType(k);if(0==r){var n=Module.ActionGetDest(k);if(Module.DestinationIsValid(n)){var p=Module.DestinationGetPage(n);if(Module.PageIsValid(p)){var t=Module.PageGetIndex(p);if(0<t){e.pageNumber=t;var u=Module.GetDestinationVPosHPos(n);e.verticalOffset=u.vpos;e.horizontalOffset=u.hpos}}}}else if(5==r){var f=Module.ObjFindObj(k,"URI");f&&(e.url=Module.ObjGetAsPDFText(f))}}b[b.length]=e}catch(l){}};d.LoadBookmarks=function(a){a=
Module.GetDoc(a);var b=[],g=Module.Runtime.stackSave();try{var e=Module.PDFDocGetFirstBookmark(a);Module.BookmarkIsValid(e)&&Module.FillBookmarkTree(e,b)}catch(d){}Module.Runtime.stackRestore(g);return{bookmarks:b}};d.UpdatePassword=function(a,b){try{var g=Module.Runtime.stackSave(),e=Module.GetDoc(a);return Module.PDFDocInitStdSecurityHandler(e,b)?(e in downloadDataMap&&REX(Module.f13(e,downloadDataMap[e].downloader)),{success:!0,pageDimensions:Module.GetPageDimensions(e)}):{success:!1}}finally{Module.Runtime.stackRestore(g)}};
d.GetTextData=function(a,b,g){a=Module.GetDoc(a);var e=[];try{var d=Module.Runtime.stackSave();e[e.length]=function(){Module.Runtime.stackRestore(d)};var m=Module.GetPage(a,b),k=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f14(k));var r=Module.getValue(k,"i8*");e[e.length]=function(){f15(r)};REX(Module.f16(r,m,0,1));var n=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module.f17(m,!0,1,0,n));var p=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f18(r,n,0,p));var t=Module.getValue(p,
"i8*"),u=Module._malloc(8*t);e[e.length]=function(){Module._free(u)};REX(Module.f18(r,n,u,p));var f=Module.GetJSDoubleArrFromCore(u,t),l=Module.allocate(4,"i8",Module.ALLOC_STACK),w=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f19(w));e[e.length]=function(){Module.f20(v)};var v=Module.getValue(w,"i8*");REX(Module.f21(r,v,0,l));var q=Module.GetJSStringFromUString(v),y=Module.getValue(l,"i8*"),x=Module._malloc(4*y);e[e.length]=function(){Module._free(x)};REX(Module.f21(r,v,x,l));var A=Module.GetJSIntArrayFromCore(x,
y),z=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f22(r,n,0,z));var C=Module.getValue(z,"i8*"),B=Module._malloc(8*C);e[e.length]=function(){Module._free(B)};REX(Module.f22(r,n,B,z));var D=Module.GetJSDoubleArrFromCore(B,C);setTimeout(function(){e.forEach(function(f){f()});g.resolve({str:q,quads:f,offsets:A,struct:D})},0)}catch(F){Module.stopped||(e.forEach(function(f){f()}),g.reject(F))}};d.InsertBlankPages=function(a,b,g,e,d){var m=[],k=Module.GetDoc(a);try{var r=Module.Runtime.stackSave();
m[m.length]=function(){Module.Runtime.stackRestore(r)};for(var n=b.length-1;0<=n;--n){var p=Module.PDFDocGetPageIterator(k,b[n]),t=Module.PDFDocPageCreate(k,g,e);Module.PDFDocPageInsert(k,p,t)}var u=Module.postPagesUpdatedEvent(k,a);setTimeout(function(){Module.stopped||(m.forEach(function(f){f()}),d.resolve(u))},0)}catch(f){Module.stopped||(m.forEach(function(f){f()}),d.reject(f))}};d.InsertPages=function(a,b,g,e,d,m){var k=[],r=Module.GetDoc(a);try{var n=Module.Runtime.stackSave();k[k.length]=function(){Module.Runtime.stackRestore(n)};
var p;if(b instanceof ArrayBuffer){var t=Module.CreateDoc(b);p=Module.GetDoc(t);k[k.length]=function(){Module.DeleteDoc(t)}}else p=Module.GetDoc(b);var u=g.length,f=Module.PageSetCreate();for(b=0;b<u;++b)Module.PageSetAddPage(f,g[b]);Module.PDFDocInsertPages(r,e,p,f,d);Module.GetPageDimensions(r);var l=Module.PageSetCreateRange(e,e+u);Module.PDFDocExportXFDF(a,l);var w=Module.postPagesUpdatedEvent(r,a);setTimeout(function(){k.forEach(function(f){f()});m.resolve(w)},0)}catch(v){Module.stopped||(k.forEach(function(f){f()}),
m.reject(v))}};d.MovePages=function(a,b,d,e){var h=[],m=Module.GetDoc(a);try{var k=Module.Runtime.stackSave();h[h.length]=function(){Module.Runtime.stackRestore(k)};for(var r=b.length,n=Module.PageSetCreate(),p=0;p<r;++p)Module.PageSetAddPage(n,b[p]);Module.PDFDocMovePages(m,d,n);var t=Module.postPagesUpdatedEvent(m,a);setTimeout(function(){Module.stopped||(h.forEach(function(a){a()}),e.resolve(t))},0)}catch(u){Module.stopped||(h.forEach(function(f){f()}),e.reject(u))}};d.RemovePages=function(a,b,
d){var e=Module.GetDoc(a),h=[];try{var m=Module.Runtime.stackSave();h[h.length]=function(){Module.Runtime.stackRestore(m)};for(var k=b.length-1;0<=k;--k){var r=Module.PDFDocGetPageIterator(e,b[k]);Module.IteratorHasNext(r)&&Module.PDFDocPageRemove(e,r)}var n=Module.postPagesUpdatedEvent(e,a);setTimeout(function(){h.forEach(function(a){a()});d.resolve(n)},0)}catch(p){Module.stopped||(h.forEach(function(a){a()}),d.reject(p))}};d.RotatePages=function(a,b,d,e){var h=Module.GetDoc(a),m=[];try{var k=Module.Runtime.stackSave();
m[m.length]=function(){Module.Runtime.stackRestore(k)};var r=b.length,n=0,p=Module.PDFDocGetPageIterator(h,b[0]),t=[];m.push(function(){Module.f23(p)});for(var u=b[0];Module.IteratorHasNext(p)&&n<b[r-1];++u){if(u===b[n]){var f=Module.IteratorCurrent(p),l=(Module.PageGetRotation(f)+d)%4;Module.PageSetRotation(f,l);t.push(u);n++}Module.IteratorNext(p)}var w=Module.postPagesUpdatedEvent(h,a,t);setTimeout(function(){m.forEach(function(f){f()});e.resolve(w)},0)}catch(v){Module.stopped||(m.forEach(function(f){f()}),
e.reject(v))}};d.ExtractPages=function(a,b,d,e){var h=[];try{var m=Module.Runtime.stackSave();h[h.length]=function(){Module.Runtime.stackRestore(m)};var k=function(a){Module.stopped||(h.forEach(function(a){a()}),e.reject(a))};Module.XFDFMerge(a,d);var r=Module.CreateEmptyDoc(),n=createPromiseCapability();h[h.length]=function(){Module.DeleteDoc(r)};n.promise.then(function(a){e.promise.then(function(a){h.forEach(function(a){a()});return a},k);Module.SaveDoc(r,void 0,!0,!1,void 0,e)},k);Module.InsertPages(r,
a,b,1,!0,n)}catch(p){k(p)}};d.CropPages=function(a,b,d,e,h,m,k){var r=Module.GetDoc(a),n=[];try{var p=Module.Runtime.stackSave();n[n.length]=function(){Module.Runtime.stackRestore(p)};var t=b.length,u=0,f=Module.PDFDocGetPageIterator(r,b[0]);n.push(function(){Module.f23(f)});for(var l=b[0];Module.IteratorHasNext(f)&&u<b[t-1];++l){if(l===b[u]){var w=Module.IteratorCurrent(f),v=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f24(w,v));var q=Module.PageGetRotation(w),y=Module.getValue(v,"double"),
x=Module.getValue(v+8,"double"),A=Module.getValue(v+16,"double"),z=Module.getValue(v+24,"double");0===q%4?(Module.setValue(v,y+h,"double"),Module.setValue(v+8,x+e,"double"),Module.setValue(v+16,A-m,"double"),Module.setValue(v+24,z-d,"double")):1===q%4?(Module.setValue(v,y+d,"double"),Module.setValue(v+8,x+h,"double"),Module.setValue(v+16,A-e,"double"),Module.setValue(v+24,z-m,"double")):2===q%4?(Module.setValue(v,y+m,"double"),Module.setValue(v+8,x+d,"double"),Module.setValue(v+16,A-h,"double"),Module.setValue(v+
24,z-e,"double")):3===q%4&&(Module.setValue(v,y+e,"double"),Module.setValue(v+8,x+m,"double"),Module.setValue(v+16,A-d,"double"),Module.setValue(v+24,z-h,"double"));Module.setValue(v+32,0,"double");REX(Module.f25(w,v));u++}Module.IteratorNext(f)}var C=Module.postPagesUpdatedEvent(r,a);setTimeout(function(){n.forEach(function(f){f()});k.resolve(C)},0)}catch(B){Module.stopped||(n.forEach(function(f){f()}),k.reject(B))}}})("undefined"===typeof self?this.Module:self.Module);this.loaded=!0;Module.init_cb&&
Module.init_cb()}}})("undefined"===typeof self?this:self);var global="undefined"!==typeof window?window:self;"undefined"===typeof Module&&(global.Module={});var crawp=Module.crap;
(function(b){b.currentFileString="/current";var d=0,a=0,c={},g=null,e=function(f,l,a,b){var q=new XMLHttpRequest;return CancellablePromise(function(c,e){q.open("GET",f,!0);q.responseType="arraybuffer";q.onerror=function(){e("Network error occurred")};q.onload=function(f){206==this.status&&q.response.byteLength==a?(f=new Int8Array(q.response),c(f)):e("Download Failed")};var d=["bytes=",l,"-",l+a-1].join("");q.setRequestHeader("Range",d);if(b)for(var g in b)q.setRequestHeader(g,b[g]);q.send()},function(){q.abort()})},
h=function(f){this.file=f;this.position=0;this.length=f.size;this.reader=new FileReaderSync};h.prototype={read:function(f,l,a){a=this.position+a<=this.length?a:this.length-this.position;f=f.subarray(l,l+a);l=new Int8Array(this.reader.readAsArrayBuffer(this.file.slice(this.position,this.position+a)));f.set(l);this.position+=a;return a},seek:function(f){this.position=f},close:function(){this.reader=this.file=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};
var m=function(f){this.data=f;this.position=0;this.length=this.data.length};m.prototype={read:function(f,l,a){a=this.position+a<=this.length?a:this.length-this.position;f=f.subarray(l,l+a);l=this.data.subarray(this.position,this.position+a);f.set(l);this.position+=a;return a},write:function(f,l,a){a=this.position+a<=this.length?a:this.length-this.position;f=f.subarray(l,l+a);this.data.subarray(this.position,this.position+a).set(f);this.position+=a;return a},seek:function(f){this.position=f},close:function(){this.data=
null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var k=function(f,l,a,b){"object"===typeof f?(this.lruList=f.lruList,this.chunkMap=f.chunkMap,this.length=f.length,this.url=f.url,this.customHeaders=f.customHeaders):(this.lruList=[],this.chunkMap={},this.chunkMap[l]=b,this.length=l,this.url=f,this.customHeaders=a)};k.prototype={lruUpdate:function(f){var l=this.lruList.lastIndexOf(f);0<=l&&this.lruList.splice(l,1);this.lruList.push(f)},getChunk:function(f){if(this.chunkMap[f])this.lruUpdate(f);
else{var l=Math.min(f+524288,this.length)-1;Date.now();var a=new XMLHttpRequest;a.open("GET",this.url,!1);a.responseType="arraybuffer";a.setRequestHeader("Range",["bytes=",f,"-",l].join(""));if(this.customHeaders)for(var b in this.customHeaders)a.setRequestHeader(b,this.customHeaders[b]);a.send();if(200==a.status||206==a.status)this.writeChunk(new Int8Array(a.response),f);else throw Error("Failed to load data from");}return this.chunkMap[f]},hadChunk:function(f){return f in this.chunkMap},hasChunk:function(f){return this.chunkMap[f]},
getCacheData:function(){return this.chunkMap[this.length]},getRequiredChunkOffsetArrays:function(f,l){var a={have:[],downloading:[],missing:[]};try{var b=Module.Runtime.stackSave(),q=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f26(f,l,q));var c=Module.getValue(q,"i8*");if(c){var e=Module._malloc(4*c);REX(Module.f27(f,l,e,c));for(q=0;q<c;++q){var d=Module.getValue(e+4*q,"i8*");this.hasChunk(d)?a.have.push(d):this.hadChunk(d)?a.missing.push(d):a.downloading.push(d)}}}finally{e&&Module._free(e),
Module.Runtime.stackRestore(b)}return a},keepVisibleChunks:function(f,l){for(var a=l.length,b=0,q=0;q<a;++q){var c=this.getRequiredChunkOffsetArrays(f,l[q]),e=c.have,d=e.length,b=b+d;if(100<b){this.keepChunks(e.slice(0,d-b+100));break}this.keepChunks(c.have)}},getChunkAsync:function(f){var l=this,a=f+524288,b=524288;a>this.length&&(b-=a-this.length);return e(this.url,f,b,this.customHeaders).then(function(a){l.writeChunk(a,f)})},getChunks:function(f){for(var l=f.length,a=Array(l),b=0;b<l;++b)a[b]=
this.getChunkAsync(f[b]);return CancellablePromise.all(a)},keepChunks:function(f){for(var a=f.length,b=0;b<a;++b)this.lruUpdate(f[b])},writeChunk:function(f,a,b){b=b?b:0;var c=this.chunkMap[a],q=f.length,e=200<=this.lruList.length&&!c;524288!=q||f.buffer.byteLength!=q?(e?(e=this.lruList.shift(),c=this.chunkMap[e],524288>c.length&&(c=new Int8Array(524288)),this.chunkMap[e]=null):c=c?this.chunkMap[a]:new Int8Array(524288),c.subarray(b,b+q).set(f),f=c):e&&(e=this.lruList.shift(),this.chunkMap[e]=null);
this.lruUpdate(a);this.chunkMap[a]=f}};var r=function(f){this.chunkStorage=f;this.position=0;this.length=this.chunkStorage.length};r.prototype={read:function(f,a,b){var c=this.position+b<=this.length,q=c?b:this.length-this.position;if(this.position<this.length){var e;for(e=0;e<q;){var d=this.position%524288,g=this.position-d,h=q-e;if(this.chunkStorage.hadChunk(g)){var g=this.chunkStorage.getChunk(g),p=f.subarray(a+e,a+e+h),d=g.subarray(d,d+h);p.set(d);d=d.length;e+=d;this.position+=d}else for(this.position+=
h;e<q;++e)p[e]=0}}if(!c){p=a+q;if(b-=q)a=this.chunkStorage.getCacheData(),b>a.length&&(b=a.length),c=this.position-this.length,p=f.subarray(p,p+b),d=a.subarray(c,c+b),p.set(d);this.position+=b;return q+b}return q},write:function(f,a,b){var e=this.position+b<=this.length,q=this.position+b<=this.length?b:this.length-this.position,c=f.subarray(a,a+q),d=this.position%524288;this.chunkStorage.writeChunk(c,this.position-d,d);this.position+=q;if(!e){c=a+q;if(b-=q)a=this.chunkStorage.getCacheData(),b>a.length&&
(b=a.length),e=this.position-this.length,c=f.subarray(c,c+b),a.subarray(e,e+b).set(c);this.position+=b;return q+b}return q},seek:function(f){this.position=f},close:function(){this.chunkStorage=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var n=function(f){this.docId=f;this.length=0;this.data=new Int8Array(8192);this.position=0};n.prototype={seek:function(f){this.position=f},close:function(){var f=new Int8Array(this.data.buffer.slice(0,this.length));Module.ChangeDocBackend(this.docId,
{ptr:Module.GetDoc(this.docId),buffer:f});this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length},read:function(f,a,b){var c=this.data.length;b=b+a<c?b:c-a;f=f.subarray(a,a+b);a=this.data.subarray(this.position,this.position+b);f.set(a);this.position+=b;return b},write:function(f,a,b){for(var c=this.position+b,q=this.data.length;c>q;){var q=Math.max(q*(16777216<q?1.5:2),c),e=new Int8Array(q);e.set(this.data.subarray(0,this.length),0);this.data=e}f=f.subarray(a,
a+b);this.data.set(f,this.position);this.position+=b;this.position>this.length&&(this.length=this.position);return b}};var p={IsSink:function(f){return 66===f.flags},open:function(f){var a=f.path.slice(1);this.IsSink(f)?(f.provider=new n(a),Module.docs[a].sink=f.provider):f.provider=Module.docs[a].sink?new m(Module.docs[a].sink.data):Module.docs[a].chunkStorage?new r(Module.docs[a].chunkStorage):Module.docs[a].buffer?new m(Module.docs[a].buffer):new h(Module.docs[a].file)},close:function(f){f.provider.close()},
read:function(f,a,b,c,q){return f.provider.read(a,b,c)},llseek:function(f,a,b){f=f.provider;1===b?a+=f.getPos():2===b&&(a=f.getTotalSize()+a);if(0>a)throw new Module.FS.ErrnoError(Module.ERRNO_CODES.EINVAL);f.seek(a);return a},write:function(f,a,b,c,q){return f.provider.write(a,b,c)}};global.THROW=function(f){throw{type:"InvalidPDF",message:f};};global.REX=function(f){f&&THROW(t(f))};var t=function(f){return"Exception: \n\t Message: "+Module.Pointer_stringify(Module.f28(f))+"\n\t Filename: "+Module.Pointer_stringify(Module.f31(f))+
"\n\t Function: "+Module.Pointer_stringify(Module.f29(f))+"\n\t Linenumber: "+Module.Pointer_stringify(Module.f30(f))};b.GetErrToString=t;b.Initialize=function(f){var a=Module.Runtime.stackSave();f=f?Module.allocate(Module.intArrayFromString(f),"i8",Module.ALLOC_STACK):0;REX(Module.f32(f));REX(Module.f33(2));Module.Runtime.stackRestore(a)};b.GetDoc=function(f){if(f in Module.docs)return Module.docs[f].ptr;throw{type:"InvalidDocReference",message:"Unable to access Document id="+f+". The document appears to be invalid or was deleted."};
};b.clearDocBackend=function(){null!==Module.cache_ptr?(Module.has_buf_ownership&&Module._free(Module.cache_ptr),Module.cache_ptr=null):Module.docs[b.currentFileString]&&delete Module.docs[b.currentFileString]};b.MakeDev=function(f){if(!c[f]){var a=FS.makedev(3,5);FS.registerDevice(a,p);FS.mkdev(f,511,a);c[f]=!0}};b.CreateDocFileBackend=function(f,a){Module.MakeDev(a);var b=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.docs[a]={file:f};var c=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_STACK);
REX(Module.f35(c,b));b=Module.getValue(b,"i8*");Module.docs[a].ptr=b};b.InsertImageIntoDoc=function(a,b,c){var e=[];try{var q=Module.ElementBuilderCreate();e.push(function(){Module.ElementBuilderDestroy(q)});var d=Module.ElementWriterCreate();e.push(function(){Module.ElementWriterDestroy(d)});var g,h;c?(g=c.width,h=c.height):(g=Module.ImageGetImageWidth(b),h=Module.ImageGetImageHeight(b),c=g/h,1<c?(g=612,h=parseInt(g/c)):(h=792,g=parseInt(h*c)));var p=Module.ElementBuilderCreateImage(q,b,0,0,g,h),
k=Module.PDFDocPageCreate(a,g,h);Module.ElementWriterBegin(d,k);Module.ElementWriterWritePlacedElement(d,p);Module.ElementWriterEnd(d);Module.PDFDocPagePushBack(a,k)}finally{e.forEach(function(a){a()})}};var u=function(a,b,c){"object"===typeof a?(this.m_pages=a.m_pages,this.m_has_named_dests=a.m_has_named_dests,this.m_finished_download=a.m_finished_download,this.m_has_outline=a.m_has_outline,this.m_current_page=a.m_current_page,this.m_id=a.m_id,this.size=a.size,this.timeout=a.timeout,this.eventPageArray=
a.eventPageArray,this.requirePageCapabilities=a.requirePageCapabilities):(this.m_pages=[],this.m_has_outline=this.m_finished_download=this.m_has_named_dests=!1,this.m_current_page=1,this.m_id=c,this.size=a,this.timeout=null,this.eventPageArray=[],this.requirePageCapabilities={});this.downloadUserData=Module.createDownloadUserData(b,c)};u.prototype={getJSUrl:function(){return Module.extractDownloadUserData(this.downloadUserData).url},getDocId:function(){return Module.extractDownloadUserData(this.downloadUserData).docId},
destroyUserData:function(){this.m_id in Module.customHeadersMap&&delete Module.customHeadersMap[this.m_id];Module.destroyDownloadUserData(this.downloadUserData)}};b.createDownloadUserData=function(a,b){var c=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_NORMAL),e=Module.allocate(8,"i8",Module.ALLOC_NORMAL);Module.setValue(e,c,"i8*");Module.setValue(e+4,parseInt(b),"i32");return this.downloadUserData=e};b.extractDownloadUserData=function(a){var b=Module.getValue(a,"i8*"),b=Module.Pointer_stringify(b);
a=Module.getValue(a+4,"i32").toString();return{url:b,docId:a}};b.destroyDownloadUserData=function(a){Module._free(Module.getValue(a,"i8*"));Module._free(a)};global.downloadDataMap={};Module.customHeadersMap={};b.GetDownloadData=function(a){if(a in downloadDataMap)return downloadDataMap[a]};b.DownloaderHint=function(a,b){var c=Module.GetDoc(a),e=downloadDataMap[c];b.currentPage&&(e.m_current_page=b.currentPage);if(b.visiblePages){for(var q=b.visiblePages,d=0;d<q.length;++d)++q[d];for(var g in this.requirePageCapabilities)this.requirePageCapabilities.hasOwnProperty(g)&&
q.push(parseInt(g));(d=Module.docs[a].chunkStorage)&&d.keepVisibleChunks(e.downloader,q);e=q.length;g=Module.allocate(4*e,"i8",Module.ALLOC_STACK);for(d=0;d<e;++d)Module.setValue(g+4*d,q[d],"i32");REX(Module.f36(c,g,e,1,0))}};b.RequirePage=function(a,b,c){a=Module.GetDoc(a);var e=downloadDataMap[a];e&&!e.m_pages[b]?(b in e.requirePageCapabilities?e.requirePageCapabilities[b].push(c):e.requirePageCapabilities[b]=[c],c=Module.allocate(4,"i8",Module.ALLOC_STACK),Module.setValue(c,b,"i32"),Module.f36(a,
c,1,0,0)):c.resolve()};b.IsLinearizationValid=function(a){a=Module.GetDoc(a);if(a=downloadDataMap[a]){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f37(a.downloader,b));return 0!==Module.getValue(b,"i8")}return!1};b.ShouldRunRender=function(a,b){var c=Module.GetDoc(a);return(c=downloadDataMap[c])?c.m_pages[b]:!0};b.createCallbacksStruct=function(a){if(!g){var b=function(a){return function(b,f,l,c){var e=arguments;b in downloadDataMap?a.apply(this,e):setTimeout(function(){b in downloadDataMap&&
a.apply(this,e)},0)}};g={downloadProc:Runtime.addFunction(function(a,b,f,l,c){l=Module.extractDownloadUserData(l);var d=l.docId;e(l.url,b,f,Module.customHeadersMap[d]).then(function(l){d in Module.docs&&Module.docs[d].chunkStorage&&Module.docs[d].chunkStorage.writeChunk(l,b);Module.f38(0,b,f,a)})}),notifyUpdatePage:Runtime.addFunction(b(function(a,b,f,l){var c=downloadDataMap[a];c.m_pages[b]=!0;var e=c.eventPageArray;if(b in c.requirePageCapabilities)for(f=c.requirePageCapabilities[b],l=0;l<f.length;++l)f[l].resolve();
c.timeout?e.push(b):(e=c.eventPageArray=[b],c.timeout=setTimeout(function(){Module.postPagesUpdatedEvent(a,c.m_id,e);c.timeout=null},100))})),notifyUpdateOutline:Runtime.addFunction(b(function(a,b){var f=downloadDataMap[a];f.m_has_outline||(f.m_has_outline=!0,Module.postEvent(f.m_id,"bookmarksUpdated",{}))})),notifyUpdateNamedDests:Runtime.addFunction(b(function(a,b){var f=downloadDataMap[a];f.m_has_named_dests||(f.m_has_named_dests=!0)})),notifyUpdateThumb:Runtime.addFunction(b(function(a,b){})),
notifyFinishedDownload:Runtime.addFunction(b(function(a,b){var f=downloadDataMap[a];f.m_finished_download||(f.m_finished_download=!0,Module.postEvent(f.m_id,"documentComplete",{}))})),notifyDocumentError:Runtime.addFunction(function(a,b){}),getCurrentPage:Runtime.addFunction(function(a,b){return downloadDataMap[a].m_current_page})}}b=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(b,g.downloadProc,"i8*");Module.setValue(b+4,a,"i8*");Module.setValue(b+8,g.notifyUpdatePage,"i8*");Module.setValue(b+
12,g.notifyUpdateOutline,"i8*");Module.setValue(b+16,g.notifyUpdateNamedDests,"i8*");Module.setValue(b+20,g.notifyUpdateThumb,"i8*");Module.setValue(b+24,g.notifyFinishedDownload,"i8*");Module.setValue(b+28,g.notifyDocumentError,"i8*");Module.setValue(b+32,g.getCurrentPage,"i8*");Module.setValue(b+36,0,"i8*");return b};b.CreateDocDownloaderBackend=function(a,b,c){var e=a.url,q=a.size,d=a.customHeaders;Module.allocate(Module.intArrayFromString(e),"i8",Module.ALLOC_NORMAL);d&&(Module.customHeadersMap[c]=
d);var g;g=a.downloadData?new u(a.downloadData,e,c,d):new u(a.size,e,c,d);var h=Module.createCallbacksStruct(g.downloadUserData),p=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(c);a.chunkStorage?e=new k(a.chunkStorage):(a=new Int8Array(new ArrayBuffer(Math.ceil((a.size+524288-1)/524288/8))),e=new k(e,q,d,a));Module.docs[c]={chunkStorage:e};REX(Module.f39(h,q,Module.GetUStringFromJSString(c),p));g.downloader=Module.getValue(p,"i8*");if(q=Module.f40(g.downloader,b))Module.f41(g.downloader),
REX(q);b=Module.getValue(b,"i8*");Module.docs[c].ptr=b;Module.PDFDocInitSecurityHandler(b)&&REX(Module.f13(b,g.downloader));downloadDataMap[b]=g};b.CreateDocBackend=function(a,l){var c=a.value,e=a.extension,q=a.type,g=Module.allocate(4,"i8",Module.ALLOC_STACK),h=Module.Runtime.stackSave();try{if(c)if("ptr"===q)Module.docs[l]={ptr:c};else{var p,q=e&&"pdf"!=e;if("object"===typeof c&&c.url)b.CreateDocDownloaderBackend(c,g,l);else{var k=c instanceof ArrayBuffer,m=k?"buffer":"file";if(k&&(c=new Uint8Array(c),
10485760>c.length+d&&!q)){d+=c.length;var n=c.length,r=Module._malloc(c.length);Module.HEAPU8.set(c,r);REX(Module.f43(r,n,g));p=Module.getValue(g,"i8*");Module.docs[l]={ptr:p,bufPtr:r,bufPtrSize:n,ownership:!0};Module.docs[l].extension=e;return}Module.MakeDev(l);k={};k[m]=c;Module.docs[l]=k;if(q){var t;a.pageSizes&&a.pageSizes.length?t=a.pageSizes[0]:a.defaultPageSize&&(t=a.defaultPageSize);var u=Module.GetUStringFromJSString(l);REX(Module.f42(g));p=Module.getValue(g,"i8*");var E=Module.ImageCreateFromFile(p,
u);Module.InsertImageIntoDoc(p,E,t)}else{var G=Module.allocate(Module.intArrayFromString(l),"i8",Module.ALLOC_STACK);REX(Module.f35(G,g));p=Module.getValue(g,"i8*")}Module.docs[l].extension=e;Module.docs[l].ptr=p}}else REX(Module.f42(g)),p=Module.getValue(g,"i8*"),Module.docs[l]={ptr:p},Module.docs[l].extension=e}finally{Module.Runtime.stackRestore(h)}};b.ChangeDocBackend=function(a,l){var c=Module.docs[a];c?(c.bufPtr&&c.ownership&&(Module._free(c.bufPtr),d-=c.bufPtrSize),delete Module.docs[a]):b.utils.warn("Trying to delete document "+
a+" that does not exist.");Module.docs[a]=l};b.DeleteDoc=function(a){var l=Module.docs[a];l?(l.ptr&&(l.ptr in downloadDataMap&&(clearTimeout(downloadDataMap[l.ptr].timeout),downloadDataMap[l.ptr].destroyUserData(),delete downloadDataMap[l.ptr]),Module.PDFDocDestroy(l.ptr)),l.bufPtr&&l.ownership&&(Module._free(l.bufPtr),d-=l.bufPtrSize),delete Module.docs[a]):b.utils.warn("Trying to delete document "+a+" that does not exist.")};b.CreateDoc=function(f,l){if("id"===f.type)return Module.docPtrStringToIdMap[f.value];
if(!l){do l=(++a).toString();while(l in Module.docs)}Module.has_buf_ownership=!0;b.CreateDocBackend(f,l);return l};b.CreateEmptyDoc=function(){var b=(++a).toString(),l=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f42(l));l=Module.getValue(l,"i8*");Module.docs[b]={ptr:l};return b};b.PDFDocCreateFromLayoutEls=function(a){var b=new Uint8Array(a);a=Module._malloc(b.length);var c=Module.Runtime.stackSave(),e=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.HEAPU8.set(b,a);b=Module.f44(a,b.length,
e);e=Module.getValue(e,"i8*");Module._free(a);Module.Runtime.stackRestore(c);REX(b);return e};b.GetPageCount=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f45(a,b));return Module.getValue(b,"i8*")};b.GetPage=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f46(a,b,c));c=Module.getValue(c,"i8*");Module.PageIsValid(c)||THROW("Trying to access page that doesn't exist at index "+b);return c};b.PageGetPageWidth=function(a){var b=Module.allocate(8,"i8",
Module.ALLOC_STACK);REX(Module.f47(a,1,b));return Module.getValue(b,"double")};b.PageGetPageHeight=function(a){var b=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f48(a,1,b));return Module.getValue(b,"double")};b.PageGetDefaultMatrix=function(a,b){var c=Module.allocate(48,"i8",Module.ALLOC_STACK);b||(b=0);REX(Module.f17(a,!0,1,b,c));return c};b.GetMatrixAsArray=function(a){for(var b=[],c=0;6>c;++c)b[c]=Module.getValue(a+8*c,"double");return b};b.PageGetPageInfo=function(a){var b=Module.allocate(48,
"i8",Module.ALLOC_STACK),c=Module.allocate(8,"i8",Module.ALLOC_STACK),e=Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f49(a,!0,1,0,c,e,b,d));return{rotation:Module.getValue(d,"i8*"),width:Module.getValue(c,"double"),height:Module.getValue(e,"double"),matrix:Module.GetMatrixAsArray(b)}};b.GetUStringFromJSString=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),e=2*(a.length+1),d=Module.allocate(e,"i8",b?Module.ALLOC_NORMAL:Module.ALLOC_STACK);
Module.stringToUTF16(a,d,e);e=Module.f50(d,c);b&&Module._free(d);REX(e);return Module.getValue(c,"i8*")};b.GetJSStringFromUString=function(a){var b=Module.allocate(4,"i16*",Module.ALLOC_STACK);REX(Module.f52(a,b));return Module.UTF16ToString(Module.getValue(b,"i16*"))};b.GetJSStringFromCString=function(a){return Module.Pointer_stringify(a)};b.PDFNetSetResourceData=function(a){Module.res_ptr=Module._malloc(a.length);Module.HEAPU8.set(a,Module.res_ptr);REX(Module.f53(Module.res_ptr,a.length));Module.res_ptr_size=
a.length};b.PDFDrawSetDPI=function(a,b){REX(Module.f54(a,b))};b.PDFDocDestroy=function(a){REX(Module.f55(a))};b.PDFRasterizerCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f56(0,a));return Module.getValue(a,"i8*")};b.PageGetRotation=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f57(a,b));return Module.getValue(b,"i8*")};b.PageGetId=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f58(a,b));b=Module.getValue(b,"i8*");a=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f59(b,a));a=Module.getValue(a,"i32");var c=Module.allocate(2,"i8",Module.ALLOC_STACK);REX(Module.f60(b,c));c=Module.getValue(c,"i16");return a+"-"+c};b.PageSetRotation=function(a,b){REX(Module.f61(a,b))};b.GetDefaultMatrixBox=function(a,b,c){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f57(a,e));a=(Module.getValue(e,"i32")+c)%4;c=Module.allocate(48,"i8",Module.ALLOC_STACK);switch(a){case 0:return REX(Module.f62(c,1,0,0,-1,-b.x1,
b.y2)),c;case 1:return REX(Module.f62(c,0,1,1,0,-b.y1,-b.x1)),c;case 2:return REX(Module.f62(c,-1,0,0,1,b.x2,-b.y1)),c;case 3:return REX(Module.f62(c,0,-1,-1,0,b.y2,b.x2)),c}throw Error("Yikes, we don't support that rotation type");};b.Matrix2DMultBBox=function(a,b){var c=Module.allocate(8,"i8",Module.ALLOC_STACK),e=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,b.x1,"double");Module.setValue(e,b.y1,"double");REX(Module.f63(a,c,e));b.x1=Module.getValue(c,"double");b.y1=Module.getValue(e,
"double");Module.setValue(c,b.x2,"double");Module.setValue(e,b.y2,"double");REX(Module.f63(a,c,e));b.x2=Module.getValue(c,"double");b.y2=Module.getValue(e,"double");return b};b.Matrix2DMult=function(a,b){var c=Module.allocate(8,"i8",Module.ALLOC_STACK),e=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,b.x,"double");Module.setValue(e,b.y,"double");REX(Module.f63(a,c,e));b.x=Module.getValue(c,"double");b.y=Module.getValue(e,"double");return b};b.Matrix2DConcat=function(a,b){var c=Module.getValue(b,
"double"),e=Module.getValue(b+8,"double"),d=Module.getValue(b+16,"double"),g=Module.getValue(b+24,"double"),h=Module.getValue(b+32,"double"),p=Module.getValue(b+40,"double");REX(Module.f64(a,c,e,d,g,h,p))};b.Matrix2DSet=function(a,b,c,e,d,g,h){REX(Module.f62(a,b,c,e,d,g,h))};b.IteratorHasNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f65(a,b));return 0!=Module.getValue(b,"i8")};b.IteratorCurrent=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f66(a,
b));return Module.getValue(Module.getValue(b,"i8*"),"i8*")};b.IteratorNext=function(a){REX(Module.f67(a))};b.PageGetNumAnnots=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f68(a,b));return Module.getValue(b,"i32")};b.PageGetAnnot=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f69(a,b,c));return Module.getValue(c,"i8*")};b.PageAnnotRemove=function(a,b){REX(Module.f70(a,b))};b.AnnotGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f71(a,b));return Module.getValue(b,"i32")};b.AnnotHasAppearance=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f72(a,0,0,b));return 0!=Module.getValue(b,"i8*")};b.AnnotRefreshAppearance=function(a){REX(Module.f73(a))};b.ObjErase=function(a,b){var c=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module.f74(a,c))};b.GetJSDoubleArrFromCore=function(a,b){for(var c=Array(b),e=a,d=0;d<b;++d)c[d]=Module.getValue(e,"double"),e+=8;return c};b.GetJSIntArrayFromCore=
function(a,b){for(var c=Array(b),e=a,d=0;d<b;++d)c[d]=Module.getValue(e,"i32"),e+=4;return c};b.BookmarkIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f75(a,b));return 0!=Module.getValue(b,"i8")};b.BookmarkGetNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f76(a,b));return Module.getValue(b,"i8*")};b.BookmarkGetFirstChild=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f77(a,b));return Module.getValue(b,"i8*")};
b.BookmarkHasChildren=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f78(a,b));return 0!=Module.getValue(b,"i8")};b.BookmarkGetAction=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f79(a,b));return Module.getValue(b,"i8*")};b.BookmarkGetTitle=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f80(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ActionIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f81(a,b));return 0!=Module.getValue(b,"i8")};b.ActionGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f82(a,b));return Module.getValue(b,"i32")};b.ActionGetDest=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f83(a,b));return Module.getValue(b,"i8*")};b.DestinationIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f84(a,b));return 0!=Module.getValue(b,"i8")};b.DestinationGetPage=function(a){var b=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f85(a,b));return Module.getValue(b,"i8*")};b.PageIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f86(a,b));return 0!=Module.getValue(b,"i8")};b.PageGetIndex=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f87(a,b));return Module.getValue(b,"i32")};b.ObjGetAsPDFText=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f88(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};
b.ObjFindObj=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),e=allocate(intArrayFromString(b),"i8",ALLOC_STACK);REX(Module.f89(a,e,c));return Module.getValue(c,"i8*")};b.PDFDocGetFirstBookmark=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f90(a,b));return Module.getValue(b,"i8*")};b.DestinationGetExplicitDestObj=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f91(a,b));return Module.getValue(b,"i8*")};b.DestinationGetFitType=function(a){var b=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f92(a,b));return Module.getValue(b,"i32")};b.ObjIsNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f93(a,b));return 0!=Module.getValue(b,"i8")};b.ObjGetNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f94(a,b));return Module.getValue(b,"double")};b.PDFDocGetRoot=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f95(a,b));return Module.getValue(b,"i8*")};b.ObjPutName=
function(a,b,c){b=allocate(intArrayFromString(b),"i8",ALLOC_STACK);c=allocate(intArrayFromString(c),"i8",ALLOC_STACK);var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f96(a,b,c,e));return Module.getValue(e,"i8*")};b.ObjPutDict=function(a,b){var c=allocate(intArrayFromString(b),"i8",ALLOC_STACK),e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f97(a,c,e));return Module.getValue(e,"i8*")};b.ObjPutString=function(a,b,c){b=allocate(intArrayFromString(b),"i8",ALLOC_STACK);c=allocate(intArrayFromString(c),
"i8",ALLOC_STACK);var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f98(a,b,c,e));return Module.getValue(e,"i8*")};b.ObjPut=function(a,b,c){b=allocate(intArrayFromString(b),"i8",ALLOC_STACK);var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f99(a,b,c,e));return Module.getValue(e,"i8*")};b.ObjGetAt=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f100(a,b,c));return Module.getValue(c,"i8*")};b.Matrix2DInverse=function(a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK);
REX(Module.f101(a,b));return b};b.PDFDocInitSecurityHandler=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f102(a,0,b));return 0!=Module.getValue(b,"i8")};b.PDFDocInitStdSecurityHandler=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),e=Module.intArrayFromString(b),d=Module.allocate(e,"i8",Module.ALLOC_STACK);REX(Module.f103(a,d,e.length-1,c));return 0!=Module.getValue(c,"i8")};b.PDFDocFDFExtract=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);
b?REX(Module.f104(a,b,2,c)):REX(Module.f105(a,2,c));return Module.getValue(c,"i8*")};b.PDFDocInsertPages=function(a,b,c,e,d){REX(Module.f106(a,b,c,e,d?1:0,0))};b.PDFDocMovePages=function(a,b,c){REX(Module.f107(a,b,a,c,0,0))};b.PDFDocGetPageIterator=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f108(a,b,c));return Module.getValue(c,"i8*")};b.PDFDocPageRemove=function(a,b){REX(Module.f109(a,b))};b.PDFDocPageCreate=function(a,b,c){var e=Module.allocate(40,"i8",Module.ALLOC_STACK);
Module.setValue(e,0,"double");Module.setValue(e+8,0,"double");Module.setValue(e+16,b,"double");Module.setValue(e+24,c,"double");Module.setValue(e+32,0,"double");b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f110(a,e,b));return Module.getValue(b,"i8*")};b.PDFDocPageInsert=function(a,b,c){REX(Module.f111(a,b,c))};b.PageSetCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f112(a));return Module.getValue(a,"i8*")};b.PageSetCreateRange=function(a,b){var c=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f113(c,a,b));return Module.getValue(c,"i8*")};b.PageSetAddPage=function(a,b){REX(Module.f114(a,b))};b.FDFDocSaveAsXFDF=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(f115(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ElementBuilderCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f116(a));return Module.getValue(a,"i8*")};b.ElementBuilderDestroy=function(a){REX(Module.f117(a))};b.ElementBuilderCreateImage=
function(a,b,c,e,d,g){var h=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f118(a,b,c,e,d,g,h));return Module.getValue(h,"i8*")};b.ElementWriterCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f119(a));return Module.getValue(a,"i8*")};b.ElementWriterDestroy=function(a){REX(Module.f120(a))};b.ElementWriterBegin=function(a,b){REX(Module.f121(a,b,1))};b.ElementWriterWritePlacedElement=function(a,b){REX(Module.f122(a,b))};b.ElementWriterEnd=function(a){var b=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f123(a,b))};b.ImageGetImageWidth=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f124(a,b));return Module.getValue(b,"i32")};b.ImageGetImageHeight=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f125(a,b));return Module.getValue(b,"i32")};b.ImageCreateFromMemory2=function(a,b,c){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f126(a,b,c,0,e));return Module.getValue(e,"i8*")};b.ImageCreateFromFile=function(a,
b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f127(a,b,0,c));return Module.getValue(c,"i8*")};b.PDFDocPagePushBack=function(a,b){REX(Module.f128(a,b))};b.PDFDocHasOC=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f129(a,b));return 0!=Module.getValue(b,"i8")};b.PDFDocGetOCGConfig=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f130(a,b));return Module.getValue(b,"i8*")};b.OCGContextCreate=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f131(a,b));return Module.getValue(b,"i8*")};b.UStringDestroy=function(a){REX(Module.f20(a))};b.FDFDocDestroy=function(a){REX(Module.f132(a))}})(global.Module);!function(b){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=b();else if("function"==typeof define&&define.amd)define([],b);else{var d;"undefined"!=typeof window?d=window:"undefined"!=typeof global?d=global:"undefined"!=typeof self&&(d=self);d.PriorityQueue=b()}}(function(){return function d(a,c,g){function e(k,m){if(!c[k]){if(!a[k]){var n="function"==typeof require&&require;if(!m&&n)return n(k,!0);if(h)return h(k,!0);n=Error("Cannot find module '"+k+"'");throw n.code="MODULE_NOT_FOUND",
n;}n=c[k]={exports:{}};a[k][0].call(n.exports,function(c){var d=a[k][1][c];return e(d?d:c)},n,n.exports,d,a,c,g)}return c[k].exports}for(var h="function"==typeof require&&require,m=0;m<g.length;m++)e(g[m]);return e}({1:[function(d,a,c){var g={}.hasOwnProperty,e=function(a,c){function e(){this.constructor=a}for(var d in c)g.call(c,d)&&(a[d]=c[d]);e.prototype=c.prototype;a.prototype=new e;a.__super__=c.prototype;return a};c=d("./PriorityQueue/AbstractPriorityQueue");d=d("./PriorityQueue/ArrayStrategy");
c=function(a){function c(a){a||(a={});a.strategy||(a.strategy=BinaryHeapStrategy);a.comparator||(a.comparator=function(a,c){return(a||0)-(c||0)});c.__super__.constructor.call(this,a)}e(c,a);return c}(c);c.ArrayStrategy=d;a.exports=c},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3}],2:[function(d,a,c){a.exports=function(){function a(c){if(null==(null!=c?c.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=c?c.comparator:void 0))throw"Must pass options.comparator, a comparator";
this.priv=new c.strategy(c);this.length=0}a.prototype.queue=function(a){this.length++;this.priv.queue(a)};a.prototype.dequeue=function(a){if(!this.length)throw"Empty queue";this.length--;return this.priv.dequeue()};a.prototype.peek=function(a){if(!this.length)throw"Empty queue";return this.priv.peek()};a.prototype.remove=function(a){this.priv.remove(a)&&--this.length};a.prototype.find=function(a){return 0<=this.priv.find(a)};a.prototype.removeAllMatching=function(a,c){var d=this.priv.removeAllMatching(a,
c);this.length-=d};return a}()},{}],3:[function(d,a,c){var g;g=function(a,c,d){var g,r,n;r=0;for(g=a.length;r<g;)n=r+g>>>1,0<=d(a[n],c)?r=n+1:g=n;return r};a.exports=function(){function a(c){var e;this.options=c;this.comparator=this.options.comparator;this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[];this.data.sort(this.comparator).reverse()}a.prototype.queue=function(a){var c;c=g(this.data,a,this.comparator);this.data.splice(c,0,a)};a.prototype.dequeue=function(){return this.data.pop()};
a.prototype.peek=function(){return this.data[this.data.length-1]};a.prototype.find=function(a){var c=g(this.data,a,this.comparator)-1;return 0<=c&&!this.comparator(this.data[c],a)?c:-1};a.prototype.remove=function(a){a=this.find(a);return 0<=a?(this.data.splice(a,1),!0):!1};a.prototype.removeAllMatching=function(a,c){for(var e=0,d=this.data.length-1;0<=d;--d)if(a(this.data[d])){var g=this.data.splice(d,1)[0];c&&c(g);++e}return e};return a}()},{}]},{},[1])(1)});(function(b){b.SetupPDFNetFunctions=function(d){Module._IB_=[];for(var a=function(b){if("object"===typeof b&&null!==b)if("undefined"!==typeof b.byteLength){var c=Module._IB_.length;Module._IB_[c]=new Uint8Array(b);b={handle:c,isArrayBufferRef:!0}}else for(prop in b)b.hasOwnProperty(prop)&&(b[prop]=a(b[prop]));return b},c=function(a){if("object"===typeof a&&null!==a)if(a.buffer)a=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);else if(a.isArrayBufferRef)a=Module._IB_[a.handle].buffer;else for(prop in a)a.hasOwnProperty(prop)&&
(a[prop]=c(a[prop]));return a},g=Module.f877(),e,h=Module.f259(g),m=function(b,e,d){b=a(b);b=(b=b.docId)?Module.GetDoc(b):0;(d=Module.EMSCallSharedFunction(g,d,b))?e.reject({type:"InvalidPDF",message:Module.GetErrToString(d)}):(d=Module.EMSGetLastResponse(g),d=c(d),e.resolve(d));Module._IB_=[]};e=Module.f639(h);)e=Module.GetJSStringFromCString(e),b.queue.onAsync(e,m);Module.f655(h);if(Module.f1063){var k={},h=function(a,b){d.on(a,b);k[a]=!0};Module.docPtrStringToIdMap={};var r=function(a){if(a in
Module.docPtrStringToIdMap)return Module.docPtrStringToIdMap[a];throw Error("Couldn't find document "+a);};b.queue.onAsync("PDFDoc.RequirePage",function(a,b){Module.RequirePage(r(a.docId),a.pageNum,b)});h("pdfDocCreateFromBuffer",function(a){a=Module.CreateDoc({type:"array",value:a.buf});var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});h("PDFDoc.destroy",function(a){a=r(a.auto_dealloc_obj);Module.DeleteDoc(a)});h("PDFDoc.saveMemoryBuffer",function(a){var b=r(a.doc);return Module.SaveHelper(Module.GetDoc(b),
b,a.flags).slice(0)});h("pdfDocCreate",function(a){a=Module.CreateDoc({type:"new"});var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});h("GetPDFDoc",function(a){a=a.docId;var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});h("ExtractPDFNetLayersContext",function(a){var b=a.layers;a=Module.GetDoc(a.docId);var c=0;b?c=Module.EMSCreateUpdatedLayersContext(a,b):Module.PDFDocHasOC(a)&&(b=Module.PDFDocGetOCGConfig(a),c=Module.OCGContextCreate(b));return c.toString(16)});
for(var n=Module.f1063(),h=Module.f259(n),m=function(b,e){b=a(b);var d=Module.EMSCallPDFNetFunction(n,b);d?e.reject({type:"InvalidPDF",message:Module.GetErrToString(d)}):(d=Module.EMSGetLastResponse(n),d=c(d),e.resolve(d))};e=Module.f639(h);)if(e=Module.GetJSStringFromCString(e),!k[e])d.onAsync(e,m);Module.f655(h)}}})("undefined"===typeof self?this:self);var isChrome=function(){var b=self.navigator.userAgent.match(/OPR/),d=self.navigator.userAgent.match(/Maxthon/),a=self.navigator.userAgent.match(/Edge/);return self.navigator.userAgent.match(/Chrome\/(.*?) /)&&!b&&!d&&!a}(),isIE=function(){var b=navigator.userAgent.toLowerCase();return(b=/(msie) ([\w.]+)/.exec(b)||/(trident)(?:.*? rv:([\w.]+)|)/.exec(b))?parseInt(b[2],10):b}(),loadPDFNetC=function(){var b=new XMLHttpRequest;b.open("GET","PDFNetC.js",!1);b.responseType="text";b.send();if(200==b.status){b=
b.responseText;isChrome&&(b=b.split('"use asm";').join(""));var d=new XMLHttpRequest;d.open("GET",(Module.memoryInitializerPrefixURL?Module.memoryInitializerPrefixURL:"")+"PDFNetC.js.mem",!0);d.responseType="arraybuffer";d.send();isIE||(Module.memoryInitializerRequest=d);eval.call(self,b)}else throw Error("Failed to load PDFNetC.js");};self.shouldResize||loadPDFNetC();
(function(b){b.EmscriptenPDFManager=function(){return this};b.EmscriptenPDFManager.prototype={LoadRes:function(a,b){Module.loadResources(a,b)},OnInitialized:function(a){Module.loaded?a():(Module.init_cb=function(){a()},b.utils.log("PDFNet is not initialized yet!"))},NewDoc:function(a,b,d){try{b.resolve(Module.loadDoc(a,d))}catch(e){Module.stopped||b.reject(e)}},DeleteDocument:function(a){Module.DeleteDoc(a)},UpdatePassword:function(a,b){return Module.UpdatePassword(a,b)},GetCanvas:function(a,b,d,
e,h,m,k,r,n){Module.loadCanvas(a,b,d,e,h,m,k,r,n)},GetCanvasProgressive:function(){return Module.GetCurrentCanvasData(!0)},LoadBookmarks:function(a){return Module.LoadBookmarks(a)},LoadText:function(a,b,d){Module.GetTextData(a,b+1,d)},SaveDoc:function(a,b,d,e,h,m){Module.SaveDoc(a,b,d,e,h,m)},CancelCurrent:function(){return Module.cancelCurrent()},LoadAnnotations:function(a,b){var d;b?(d=Module.PageArrayToPageSet(b),d=Module.PDFDocExportXFDF(a,d)):d=Module.PDFDocExportXFDF(a);return d},SetWorkerRestartCallback:function(a){Module.SetWorkerRestartCallback(a)},
Initialize:function(a,b){a&&(Module.TOTAL_MEMORY=a);Module.memoryInitializerPrefixURL=b;loadPDFNetC()},MergeXFDF:function(a,b,d){return Module.MergeXFDF(a,b,d)},InsertPages:function(a,b,d,e,h,m){return Module.InsertPages(a,b,d,e,h,m)},MovePages:function(a,b,d,e){return Module.MovePages(a,b,d,e)},RemovePages:function(a,b,d){return Module.RemovePages(a,b,d)},RotatePages:function(a,b,d,e){return Module.RotatePages(a,b,d,e)},ExtractPages:function(a,b,d,e){return Module.ExtractPages(a,b,d,e)},CropPages:function(a,
b,d,e,h,m,k){return Module.CropPages(a,b,d,e,h,m,k)},DownloaderHint:function(a,b){return Module.DownloaderHint(a,b)},IsLinearizationValid:function(a){return Module.IsLinearizationValid(a)},shouldRunRender:function(a){return Module.ShouldRunRender(a.docId,a.pageIndex+1)},Stop:function(){Module.stopped=!0},InsertBlankPages:function(a,b,d,e,h){Module.InsertBlankPages(a,b,d,e,h)}};var d={setup:function(a){function c(c,d){b.utils.log("Redirected "+c.callbackId);a.send("redirect_request",c)}a.replaceAsync("test",
c);a.replaceAsync("NewDoc",c);a.replaceAsync("UpdatePassword",c);a.replaceAsync("LoadRes",c);a.replaceAsync("GetCanvas",c);a.replaceAsync("GetCanvasPartial",c);a.replaceAsync("LoadText",c);a.replaceAsync("SaveDoc",c);a.replaceAsync("LoadBookmarks",c);a.replaceAsync("GetCanvasProgressive",c);a.replaceAsync("LoadAnnotations",c);a.replaceAsync("actionCancel",c)}};(function(a){function c(a){var b=a.data,c=a.action,d;d="GetCanvas"==c||"GetCanvasPartial"==c?m.shouldRunRender(b):!0;d?(f=a,k.actionMap[c](b,
a.asyncCallCapability,a)):(deferredQueue.queue(a),h())}function g(a,b){a.asyncCallCapability=b;f?k.queue(a):c(a)}function e(c){self.shouldResize&&m.Initialize(c.options.workerHeapSize,c.options.pdfResourcePath);if(c.array instanceof Uint8Array){var e=255===c.array[0];a.postMessageTransfers=e;"response"in new XMLHttpRequest?m.OnInitialized(function(){m.SetWorkerRestartCallback(function(b,c,e){d.setup(a);var q=[],g;f&&(f.asyncCallCapability=void 0,q.push(f));for(var h=k.length,l=0;l<h;++l)g=k.dequeue(),
g.asyncCallCapability=void 0,q.push(g);a.send("worker_restart",{size:b,queue:q,docData:e,resData:c,workerPath:r,location:r+"pdf/ResizableWorker.js"});m.Stop();f&&(m.CancelCurrent(),f=null);u();f=null});var g=function(){t();a.send("test",{supportTypedArray:!0,supportTransfers:e})};b.SetupPDFNetFunctions(a);if(self.shouldResize)if(c.resData&&(m.LoadRes(c.resData),r=c.workerPath),c.docData){var h=c.docData,l=[],n;for(n in h){var p=createPromiseCapability();l.push(p.promise);m.NewDoc(h[n].source,p,n)}Promise.all(l).then(function(){g()})}else g();
else g()}):a.send("test",!1)}else a.send("test",!1)}function h(){if(!f||"BeginOperation"!=f.action)if(k.length){if(!f||f.priority!=v){var a=k.dequeue();c(a)}}else f=null}var m=new b.EmscriptenPDFManager,k,r,n=!1,p=!1;Module.workerMessageHandler=a;var t=function(){n?p||(a.send("workerLoaded",{}),p=!0):n=!0};m.OnInitialized(t);var u=function(){b.queue=k=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-
a.priority}});b.deferredQueue=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});k.actionMap={};k.onAsync=function(b,c){a.onAsync(b,g);k.actionMap[b]=c}};u();var f=null;a.on("test",e);a.on("InitWorker",e);var l=function(a){f&&a(f)&&(m.CancelCurrent(),f=null);k.removeAllMatching(a,function(a){a.asyncCallCapability.reject({type:"Cancelled",message:"Operation was cancelled due to document deletion."})})},
w=function(a){l(function(b){return b.data&&b.data.docId===a})};a.on("UpdatePassword",function(a){return m.UpdatePassword(a.docId,a.password)});a.on("LoadRes",function(a){r=a.workerPath;m.LoadRes(a.array,a.l);return{}});a.on("DownloaderHint",function(a){m.DownloaderHint(a.docId,a.hint)});a.on("IsLinearized",function(a){return m.IsLinearizationValid(a.docId)});a.onNextAsync(h);k.onAsync("NewDoc",function(a,b){m.NewDoc(a,b)});k.onAsync("GetCanvas",function(a,b){m.GetCanvas(a.docId,a.pageIndex,a.width,
a.height,a.rotation,null,a.layers,a.overprintMode,b)});k.onAsync("GetCanvasPartial",function(a,b){m.GetCanvas(a.docId,a.pageIndex,a.width,a.height,a.rotation,a.bbox,a.layers,a.overprintMode,b)});k.onAsync("LoadText",function(a,b){m.LoadText(a.docId,a.pageIndex,b)});k.onAsync("SaveDoc",function(a,b){m.SaveDoc(a.docId,a.xfdfString,a.finishedWithDocument,a.printDocument,a.flags,b)});k.onAsync("SaveDocFromFixedElements",function(a,b){Module.SaveDocFromFixedElements(a.bytes,a.xfdfString,a.flags,b)});k.onAsync("MergeXFDF",
function(a,b){m.MergeXFDF(a.docId,a.xfdf,b)});k.onAsync("InsertPages",function(a,b){m.InsertPages(a.docId,a.doc,a.pageArray,a.destPos,a.insertBookmarks,b)});k.onAsync("MovePages",function(a,b){m.MovePages(a.docId,a.pageArray,a.destPos,b)});k.onAsync("RemovePages",function(a,b){m.RemovePages(a.docId,a.pageArray,b)});k.onAsync("RotatePages",function(a,b){m.RotatePages(a.docId,a.pageArray,a.rotation,b)});k.onAsync("ExtractPages",function(a,b){m.ExtractPages(a.docId,a.pageArray,a.xfdfString,b)});k.onAsync("CropPages",
function(a,b){m.CropPages(a.docId,a.pageArray,a.topMargin,a.botMargin,a.leftMargin,a.rightMargin,b)});k.onAsync("InsertBlankPages",function(a,b){m.InsertBlankPages(a.docId,a.pageArray,a.width,a.height,b)});k.onAsync("BeginOperation",function(a,b){b.resolve()});var v=99999;a.on("FinishOperation",function(b){if("BeginOperation"==f.action)a.onNextAsync(h),m.CancelCurrent(),f=null;else throw{message:"Operation has not started."};});a.on("DeleteDocument",function(a){a=a.docId;w(a);m.DeleteDocument(a)});
a.on("LoadBookmarks",function(a){return m.LoadBookmarks(a.docId)});a.on("GetCanvasProgressive",function(a){var b;if(f&&f.callbackId===a.callbackId)b=m.GetCanvasProgressive();else{if(k.find({priority:0,callbackId:a.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};if(deferredQueue.find({priority:0,callbackId:a.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};}if(!b)throw{type:"Unavailable",message:"Rendering is complete or was cancelled."};return b});
a.on("LoadAnnotations",function(a){return{xfdfString:m.LoadAnnotations(a.docId,a.pages)}});a.on("actionCancel",function(a){f&&f.callbackId===a.callbackId?m.CancelCurrent()&&setTimeout(function(){h()},0):(k.remove({priority:0,callbackId:a.callbackId}),deferredQueue.remove({priority:0,callbackId:a.callbackId}))})})(new MessageHandler("worker_processor",this))})("undefined"===typeof window?this:window);
